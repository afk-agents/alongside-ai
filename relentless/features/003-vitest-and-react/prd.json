{
  "project": "User Stories: Testing Infrastructure",
  "branchName": "ralph/003-user-stories-testing-infrastructure",
  "description": "",
  "userStories": [
    {
      "id": "US-001",
      "title": "Install Testing Dependencies",
      "description": "As a developer, I want the testing dependencies installed so that I can start writing tests.",
      "acceptanceCriteria": [
        "Vitest is installed as a dev dependency",
        "@vitejs/plugin-react is installed for JSX transform",
        "@testing-library/react is installed for component testing",
        "@testing-library/jest-dom is installed for DOM matchers",
        "@testing-library/user-event is installed for user interaction simulation",
        "jsdom is installed for DOM environment",
        "@vitest/coverage-v8 is installed for coverage reporting",
        "Test scripts added to package.json: `test`, `test:watch`, `test:coverage`",
        "`bun install` completes without errors",
        "Typecheck passes",
        "T001 [US-001] Install vitest and @vitejs/plugin-react",
        "T002 [US-001] Install @testing-library/react, @testing-library/jest-dom, @testing-library/user-event",
        "T003 [US-001] Install jsdom and @vitest/coverage-v8",
        "T004 [US-001] Add test scripts to package.json"
      ],
      "priority": 1,
      "passes": true,
      "notes": "",
      "phase": "Setup"
    },
    {
      "id": "US-002",
      "title": "Configure Vitest",
      "description": "As a developer, I want Vitest configured correctly so that tests can run with React support and path aliases.",
      "acceptanceCriteria": [
        "`vitest.config.ts` exists with React plugin enabled",
        "jsdom environment is configured for DOM testing",
        "`vitest.setup.ts` exists with jest-dom matchers and cleanup",
        "Path alias `@/*` resolves to project root in test files",
        "Test file patterns include `*.test.ts`, `*.test.tsx`, `*.spec.ts`, `*.spec.tsx`",
        "`globals: true` enables Jest-compatible API (describe, it, expect)",
        "`bun test` command runs without errors (even with no tests)",
        "Typecheck passes",
        "Lint passes",
        "T005 [US-002] Create vitest.config.ts with React plugin and jsdom",
        "T006 [US-002] Configure path alias resolution matching tsconfig",
        "T007 [US-002] Create vitest.setup.ts with jest-dom and cleanup",
        "T008 [US-002] Add Vitest type references for global API"
      ],
      "priority": 2,
      "passes": false,
      "notes": "",
      "dependencies": [
        "US-001"
      ],
      "phase": "Setup"
    },
    {
      "id": "US-003",
      "title": "Test Utility Functions",
      "description": "As a developer, I want to write unit tests for utility functions so that I can verify non-UI code works correctly.",
      "acceptanceCriteria": [
        "`__tests__/` directory structure exists",
        "Sample utility function exists in `lib/example.ts`",
        "Sample test exists in `__tests__/lib/example.test.ts`",
        "Test imports utility using path alias `@/lib/example`",
        "`bun test` runs the sample test and passes",
        "Test uses describe/it/expect global API",
        "Multiple test cases run independently",
        "Typecheck passes",
        "Lint passes",
        "T009 [US-003] Create `__tests__/` directory structure",
        "T010 [US-003] Create sample utility function `lib/example.ts`",
        "T011 [US-003] Create sample test `__tests__/lib/example.test.ts`",
        "T012 [US-003] Verify test runs and passes with `bun test`"
      ],
      "priority": 3,
      "passes": false,
      "notes": "",
      "dependencies": [
        "US-002"
      ],
      "parallel": false,
      "phase": "Foundation"
    },
    {
      "id": "US-004",
      "title": "Test React Components",
      "description": "As a developer, I want to write tests for React components so that I can verify UI behavior works correctly.",
      "acceptanceCriteria": [
        "Custom test utilities exist in `__tests__/setup/test-utils.tsx`",
        "Convex mock utilities exist in `__tests__/setup/mocks/convex.ts`",
        "Sample component test exists for SignOutButton",
        "Test renders component with React Testing Library",
        "Test queries DOM elements (getByRole, getByText, etc.)",
        "Test simulates user events (click) with userEvent",
        "Test mocks Next.js router and Convex hooks",
        "`bun test` runs component tests and passes",
        "Typecheck passes",
        "Lint passes",
        "T013 [US-004] Create `__tests__/setup/test-utils.tsx` with custom render",
        "T014 [US-004] Create `__tests__/setup/mocks/convex.ts` for Convex mocking",
        "T015 [US-004] Create SignOutButton test in `__tests__/components/auth/`",
        "T016 [US-004] Mock Next.js navigation and Convex auth hooks",
        "T017 [US-004] Verify component test runs and passes"
      ],
      "priority": 4,
      "passes": false,
      "notes": "",
      "dependencies": [
        "US-002"
      ],
      "parallel": false,
      "phase": "Foundation"
    },
    {
      "id": "US-005",
      "title": "Watch Mode for Development",
      "description": "As a developer, I want tests to re-run automatically when I change files so that I get immediate feedback during development.",
      "acceptanceCriteria": [
        "`bun test:watch` starts Vitest in watch mode",
        "Modifying a source file triggers relevant test re-run",
        "Modifying a test file triggers that test file to re-run",
        "Watch mode displays clear output on file changes",
        "Watch mode can be exited cleanly (Ctrl+C)",
        "Typecheck passes",
        "T018 [US-005] Verify `test:watch` script works correctly",
        "T019 [US-005] Test file change detection for source files",
        "T020 [US-005] Test file change detection for test files"
      ],
      "priority": 5,
      "passes": false,
      "notes": "",
      "dependencies": [
        "US-002"
      ],
      "phase": "Polish"
    },
    {
      "id": "US-006",
      "title": "Coverage Reporting",
      "description": "As a developer, I want to see test coverage reports so that I can identify untested code paths.",
      "acceptanceCriteria": [
        "`bun test:coverage` generates a coverage report",
        "Coverage report shows line coverage percentages",
        "Coverage report shows function coverage percentages",
        "Coverage report shows branch coverage percentages",
        "HTML coverage report is generated in `coverage/` directory",
        "`coverage/` is added to `.gitignore`",
        "Coverage includes app/, components/, lib/ directories",
        "Coverage excludes convex/_generated/ and test files",
        "Typecheck passes",
        "T021 [US-006] Configure coverage provider (v8) in vitest.config.ts",
        "T022 [US-006] Configure coverage include/exclude patterns",
        "T023 [US-006] Add coverage/ to .gitignore",
        "T024 [US-006] Verify coverage report generates correctly"
      ],
      "priority": 6,
      "passes": false,
      "notes": "",
      "dependencies": [
        "US-002"
      ],
      "phase": "Polish"
    }
  ]
}