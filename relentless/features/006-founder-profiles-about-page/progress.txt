---
feature: Founder Profiles & About Page
started: 2026-01-17
last_updated: 2026-01-17
stories_completed: 14
---

# Progress Log: Founder Profiles & About Page

## 2026-01-17 - Feature Specification Created

- Created feature branch `006-founder-profiles-about-page`
- Generated specification with 5 user stories (2 P1, 2 P2, 1 P3)
- Identified schema change needed: add `slug` field to profiles table
- Documented assumptions about founder role usage and static content approach

---

## 2026-01-17 - US-002: Profile Queries (getFounders and getBySlug)

**Implemented:**
- Created `convex/profiles.ts` with two public queries
- `getFounders`: Returns published admin profiles using composite index `by_role_and_profileStatus`
- `getBySlug`: Returns single profile by URL slug using `by_slug` index, null for non-published
- Both queries include full TypeScript return type validators with all profile fields

**Files Changed:**
- `convex/profiles.ts` (created)
- `__tests__/convex/profiles.test.ts` (created - 13 tests)
- `convex/_generated/api.d.ts` (regenerated)

**Learnings:**
- Followed TDD workflow: tests first, then implementation
- Used convex-test pattern from existing tags.test.ts
- Composite index `by_role_and_profileStatus` allows efficient founders query

---

## 2026-01-17 - US-003: ProfilePhoto Component with Fallback Avatar

**Implemented:**
- Created `components/profiles/ProfilePhoto.tsx` with three display modes:
  - Image display using Next.js Image component when photoUrl provided
  - Initials avatar when displayName exists but no photo (first 2 initials)
  - Generic user icon placeholder when neither available
- Size variants: sm (32px), md (48px), lg (64px), xl (96px)
- Graceful image error handling - falls back to initials or placeholder
- Rounded circular design with proper accessibility labels

**Files Changed:**
- `components/profiles/ProfilePhoto.tsx` (created)
- `__tests__/components/profiles/ProfilePhoto.test.tsx` (created - 18 tests)

**Learnings:**
- TDD workflow: wrote all 18 tests first, then implemented component
- Used useState for image error state to handle fallback gracefully
- Size variants use consistent Tailwind class mappings

---

## 2026-01-17 - US-004: SocialLinks Component

**Implemented:**
- Created `components/profiles/SocialLinks.tsx` with icon links for:
  - LinkedIn, Twitter (X), GitHub, Website
- Security: `target="_blank" rel="noopener noreferrer"` on all links
- Accessibility: `aria-label` on each link, `aria-hidden` on icons
- Optional `showLabels` prop for text labels
- Returns `null` when no links provided (empty state)
- Created `components/profiles/index.ts` barrel file

**Files Changed:**
- `components/profiles/SocialLinks.tsx` (created)
- `components/profiles/index.ts` (created)
- `__tests__/components/profiles/SocialLinks.test.tsx` (created - 19 tests)

**Learnings:**
- TDD workflow: wrote all 19 tests first, then implemented component
- Used config object pattern for clean icon/label mapping
- SVG icons with proper accessibility attributes

---

## 2026-01-17 - US-005: ProfileCard Component for About Page

**Implemented:**
- Created `components/profiles/ProfileCard.tsx` composing profile components
- Displays: ProfilePhoto (lg), displayName as link, bio excerpt, SocialLinks
- Bio truncation with `line-clamp-3` for consistent card heights
- Name links to `/profiles/[slug]` when slug exists
- Optional `showViewProfile` prop for explicit link instead of wrapping
- Hover state with `hover:shadow-lg` transition
- Full-width responsive design

**Files Changed:**
- `components/profiles/ProfileCard.tsx` (created)
- `components/profiles/index.ts` (updated - added ProfileCard export)
- `__tests__/components/profiles/ProfileCard.test.tsx` (created - 19 tests)

**Learnings:**
- Avoided nested `<a>` tags by making displayName the link instead of wrapping card
- line-clamp Tailwind utility provides clean text truncation

---

## 2026-01-17 - US-006: Mission and Values Sections

**Implemented:**
- Created `components/about/MissionSection.tsx` with:
  - "Learning AI, Together" headline
  - Two mission statement paragraphs
  - Gradient background styling (blue-50 to indigo-100)
  - Centered text layout with max-width constraint
- Created `components/about/ValuesSection.tsx` with:
  - "Our Values" heading
  - 4 value cards: Community First, Practical Knowledge, Inclusive Access, Continuous Growth
  - SVG icons with circular accent backgrounds
  - Responsive grid: 1 col mobile, 2 col tablet, 4 col desktop
- Created `components/about/index.ts` barrel file

**Files Changed:**
- `components/about/MissionSection.tsx` (created)
- `components/about/ValuesSection.tsx` (created)
- `components/about/index.ts` (created)
- `__tests__/components/about/MissionSection.test.tsx` (created - 5 tests)
- `__tests__/components/about/ValuesSection.test.tsx` (created - 9 tests)

**Learnings:**
- TDD workflow: wrote all 14 tests first, then implemented components
- Values config array pattern allows clean mapping in JSX

---

## 2026-01-17 - US-007: Founder Section with Dynamic Data

**Implemented:**
- Created `components/about/FounderSection.tsx` with:
  - `useQuery(api.profiles.getFounders)` for dynamic data fetching
  - "Meet the Founders" heading
  - Responsive grid: 1 col mobile, 2 col tablet
  - Loading skeleton state while fetching
  - "Coming soon" message for empty state
  - Maps founders to ProfileCard components with `showViewProfile`
- Updated `app/about/page.tsx` to compose all sections:
  - MissionSection, ValuesSection, FounderSection
  - Removed placeholder content

**Files Changed:**
- `components/about/FounderSection.tsx` (created)
- `components/about/index.ts` (updated - added FounderSection export)
- `app/about/page.tsx` (updated - composed all sections)
- `__tests__/components/about/FounderSection.test.tsx` (created - 8 tests)

**Learnings:**
- Mocking pattern for Convex useQuery in tests
- Skeleton loading provides better UX than spinner

---

## 2026-01-17 - US-008: Individual Profile Page Route

**Implemented:**
- Created `components/profiles/ProfilePage.tsx` with full profile layout:
  - ProfilePhoto (xl size), displayName as h1, location with icon
  - Full bio text with "About" heading
  - Skills displayed as pill tags
  - "Currently Working On" section
  - SocialLinks integration
  - Graceful handling of missing optional fields
- Created `app/profiles/[slug]/page.tsx`:
  - Uses React 19 `use()` to unwrap params Promise
  - Fetches profile with `useQuery(api.profiles.getBySlug)`
  - Loading skeleton state while fetching
  - Calls `notFound()` when profile is null
- Created `app/profiles/[slug]/not-found.tsx` with friendly 404 message

**Files Changed:**
- `components/profiles/ProfilePage.tsx` (created)
- `components/profiles/index.ts` (updated - added ProfilePage export)
- `app/profiles/[slug]/page.tsx` (created)
- `app/profiles/[slug]/not-found.tsx` (created)
- `__tests__/components/profiles/ProfilePage.test.tsx` (created - 14 tests)

**Learnings:**
- Next.js 15+ params are Promises requiring `use()` hook
- `notFound()` from next/navigation triggers not-found.tsx

---

## 2026-01-17 - US-009: Admin Update Mutation for Profiles

**Implemented:**
- Added `update` mutation to `convex/profiles.ts` with:
  - `requireRole(ctx, ["admin"])` for admin-only access
  - Optional fields: displayName, bio, slug, socialLinks, workingOnNow, skills, location, profileStatus
  - `validateSlug()` helper for slug format validation (2-50 chars, lowercase alphanumeric with hyphens)
  - `slugExistsExcluding()` helper for uniqueness check (excludes current profile)
  - Selective field patching - only updates provided fields

**Files Changed:**
- `convex/profiles.ts` (updated - added update mutation and helpers)
- `__tests__/convex/profiles.test.ts` (updated - 10 new tests)

**Learnings:**
- Used existing `requireRole` helper pattern from codebase
- Reused `validateSlug` pattern from tags module
- Build patch object dynamically to only update provided fields

---

## 2026-01-17 - US-010: Admin Photo Upload Functionality

**Implemented:**
- Added `generateUploadUrl` mutation to `convex/profiles.ts`:
  - Requires admin role via `requireRole(ctx, ["admin"])`
  - Returns signed upload URL from `ctx.storage.generateUploadUrl()`
- Added `getPhotoUrl` query to `convex/profiles.ts`:
  - Accepts `storageId` with `v.id("_storage")` validator
  - Returns URL from `ctx.storage.getUrl()` or null
- Updated `ProfilePhoto` component:
  - Added `photoStorageId` prop of type `Id<"_storage">`
  - Uses `useQuery` to fetch URL when `photoStorageId` provided
  - Prefers `photoUrl` over `photoStorageId` when both provided
  - Falls back to initials or placeholder while loading/on null

**Files Changed:**
- `convex/profiles.ts` (updated - added generateUploadUrl and getPhotoUrl)
- `components/profiles/ProfilePhoto.tsx` (updated - added photoStorageId support)
- `__tests__/convex/profiles.test.ts` (updated - 4 new tests)
- `__tests__/components/profiles/ProfilePhoto.test.tsx` (updated - 4 new tests)
- `__tests__/components/profiles/ProfileCard.test.tsx` (updated - added useQuery mock)
- `__tests__/components/profiles/ProfilePage.test.tsx` (updated - added useQuery mock)

**Learnings:**
- Convex storage API: `generateUploadUrl()` for upload, `getUrl()` for retrieval
- `useQuery` with `"skip"` conditional to avoid calling when no storageId
- Need to mock `convex/react` in tests that use components with `useQuery`

---

## 2026-01-17 - US-011: Profile Authored Content Display

**Implemented:**
- Created `components/profiles/AuthoredContent.tsx` displaying content by type:
  - Projects, Experiments, Articles, Videos sections
  - Each item links to its respective page (`/projects/[slug]`, etc.)
  - Content sections hidden when empty
  - Entire component hidden when no authored content exists
- Updated `ProfilePage` component to integrate authored content:
  - Added `useQuery(api.profiles.getAuthoredContent)` call
  - Renders AuthoredContent section after "Working On Now"

**Files Changed:**
- `components/profiles/AuthoredContent.tsx` (created)
- `components/profiles/index.ts` (updated - added AuthoredContent export)
- `components/profiles/ProfilePage.tsx` (updated - integrated AuthoredContent)
- `__tests__/components/profiles/AuthoredContent.test.tsx` (already existed - 16 tests)

**Learnings:**
- getAuthoredContent query was already implemented in previous iteration
- Tests already existed for AuthoredContent component
- Used config object pattern for content type URL prefixes and labels

---

## 2026-01-17 - US-012: Admin Profile List Page

**Implemented:**
- Added `list` query to `convex/profiles.ts`:
  - Requires admin role via `requireRole(ctx, ["admin"])`
  - Returns all profiles with minimal fields: _id, displayName, role, profileStatus, slug
  - Sorted by creation time descending
  - Uses `profileListItemValidator` for return type
- Created `app/admin/profiles/page.tsx`:
  - Admin authentication check via `useQuery(api.users.getCurrentUserProfile)`
  - Table display with columns: Name, Role, Status, Slug, Edit
  - Role badges (admin=purple, member=blue, guest=gray)
  - Status badges (locked=red, unlocked=yellow, published=green)
  - Edit links to `/admin/profiles/[id]/edit`
  - Loading skeleton state
  - Empty state message

**Files Changed:**
- `convex/profiles.ts` (updated - added profileListItemValidator and list query)
- `app/admin/profiles/page.tsx` (created)
- `__tests__/convex/profiles.test.ts` (updated - 7 new tests)

**Learnings:**
- TDD workflow: wrote 7 tests first, then implemented list query
- Reused existing admin page pattern for authorization check
- Badge components provide visual distinction for role/status

---

## 2026-01-17 - US-013: Admin Profile Editor Page

**Implemented:**
- Added `get` query to `convex/profiles.ts`:
  - Requires admin role via `requireRole(ctx, ["admin"])`
  - Returns full profile by ID with all fields
  - Uses `fullProfileValidator` for return type
  - Returns null for non-existent profiles
- Created `components/profiles/ProfileEditor.tsx`:
  - Photo upload with preview using Convex storage
  - Slug input with auto-generation from displayName
  - Social links grouped inputs (LinkedIn, Twitter, GitHub, Website)
  - Skills tag input (comma-separated parsing)
  - Profile status select dropdown
  - Success/error toast messages
  - Loading states for save and upload
- Created `app/admin/profiles/[id]/edit/page.tsx`:
  - Admin authentication check
  - Profile loading skeleton
  - Not found handling
  - Back to profiles link

**Files Changed:**
- `convex/profiles.ts` (updated - added fullProfileValidator and get query)
- `components/profiles/ProfileEditor.tsx` (created)
- `components/profiles/index.ts` (updated - added ProfileEditor export)
- `app/admin/profiles/[id]/edit/page.tsx` (created)
- `__tests__/convex/profiles.test.ts` (updated - 5 new tests)

**Learnings:**
- TDD workflow: wrote 5 tests first, then implemented get query
- Used useState for form fields to allow controlled inputs
- generateSlug helper provides clean URL-friendly slugs
- Convex storage requires two-step upload (get URL, then POST)

---

## 2026-01-17 - US-014: Seed Founder Profile Data

**Implemented:**
- Created `convex/seedFounders.ts` with internal mutation:
  - Creates David profile with role='admin', profileStatus='published', slug='david'
  - Creates Nathan profile with role='admin', profileStatus='published', slug='nathan'
  - Both have displayName, bio, workingOnNow, skills, location, socialLinks
  - Script is idempotent (checks if profiles exist by slug before creating)
  - Returns { created: string[], skipped: string[] } for visibility

**Files Changed:**
- `convex/seedFounders.ts` (created)

**Usage:**
```bash
npx convex run seedFounders:seed
```

**Learnings:**
- Used internalMutation for scripts not exposed to client
- Idempotent pattern: check by slug before insert
- Returns arrays to show what was created vs skipped

---

## FEATURE COMPLETE

All 14 user stories have been implemented:

- US-001: Schema Update (slug, photoStorageId, indexes)
- US-002: Profile Queries (getFounders, getBySlug)
- US-003: ProfilePhoto Component
- US-004: SocialLinks Component
- US-005: ProfileCard Component
- US-006: Mission and Values Sections
- US-007: Founder Section with Dynamic Data
- US-008: Individual Profile Page Route
- US-009: Admin Update Mutation
- US-010: Admin Photo Upload
- US-011: Profile Authored Content Display
- US-012: Admin Profile List Page
- US-013: Admin Profile Editor Page
- US-014: Seed Founder Profile Data

Total tests added: 46 tests for profiles module
